# Collection of Testcases for Ramath
# @(#) $Id: matrix.tests 955 2012-06-05 07:22:59Z gfis $
# 2015-03-23, Dr. Georg Fischer: extracted from siomple.tests
#-----------------------------------
# Caution:
# (1) Adjust the following line: URL where Ramath was deployed
URL=http://localhost:8080/ramath/servlet
# (2) Adjust the following line: default commandline arguments
ARGS=
#======================================================================

# Symbolic Matrix Algebra
PACKAGE=org.teherba.ramath.symbolic

TEST S00 PolyVector from expression
CALL PolyVector

TEST S01 PolyVector inner product
CALL PolyVector -read "a-b" "a+b" "c+d"

TEST S02 PolyMatrix identity(4)
CALL PolyMatrix 4

TEST S03 PolyMatrix determinant(3), (4)
CALL PolyMatrix

TEST S04 PolyMatrix characteristic polynomial
CALL PolyMatrix -char 3

TEST PV1 PolyVector.powerSum
CALL PolyVector -psum m^2-n^2 (2*m*n) m^2+n^2

TEST PV2 PolyVector.powerSum
CALL PolyVector -psum a b c 

TEST PMA1 PolyMatrix.multiply
CALL PolyMatrix -mult [[5,5,0,-3],[3,0,5,5],[0,-3,5,5],[5,5,3,0]] [a,b,c,d]

TEST PM20 abst
CALL PolyMatrix -abst [[-2,-2,1,0],[1,0,2,2],[2,2,0,1],[0,1,-2,-2]] 

TEST PM21 abst
CALL PolyMatrix -abst [[5,5,0,-3],[3,0,5,5],[0,-3,5,5],[5,5,3,0]] 

#-------------------------
# MatrixExhauster
PACKAGE=org.teherba.ramath
#-----------
# Pythagoras

TEST MX01 m2 Barning's, Price's and Barning's flipped
CALL MatrixExhauster m2 -l 4

TEST MX02 m2 6
CALL MatrixExhauster m2 -l 6

# TEST MX03 m2 10
# CALL MatrixExhauster m2 -l 10

TEST MX04 m3 4
CALL MatrixExhauster m3 -l 3

TEST MX05 v2 6
CALL MatrixExhauster v2 -l 6

TEST MX06 v2 9
CALL MatrixExhauster v2 -l 9

TEST EC20 
CALL MatrixExhauster ec221 -l 4 -v [1,0,1]
TEST EC21 
CALL MatrixExhauster ec221 -l 4 -v [3,4,5]
TEST EC22 
CALL MatrixExhauster ec221 -l 8 -v [3,4,5]

TEST EC30 
CALL MatrixExhauster ec331 -l 3 -v [1,0,0,1]
TEST EC31 
CALL MatrixExhauster ec331 -l 3 -v [3,4,5,6]
TEST EC32 
CALL MatrixExhauster ec331 -l 4 -v [3,4,5,6]
TEST EC33 
CALL MatrixExhauster ec340 -l 2 -v [6,-3,-4,-5]
TEST EC34 
CALL MatrixExhauster ec340 -l 3 -v [6,-3,-4,-5]

#-----------
# EC(3)

TEST MX10            pEC322 
CALL MatrixExhauster pEC322 -l 4

TEST MX11            pEC322 
CALL MatrixExhauster pEC322 -l 5
# found chain 8, fact 27 [[5,5,0,-3],[3,0,5,5],[0,-3,5,5],[5,5,3,0]] [9,10,1,12] => [59,92,35,98] => [461,842,389,860] => [3935,7628,3719,7682] => [34769,68810,34121,68972] => [310979,619772,309035,620258] => [2792981,5579402,2787149,5580860] => [25119335,50218988,25101839,50223362] => [226021529,451984010,225969041,451997132]
# in 68 s
TEST MX12            pEC331 
CALL MatrixExhauster pEC331 -l 4

TEST MX13            pEC331 
CALL MatrixExhauster pEC331 -l 5

TEST MX14            pEC331 
CALL MatrixExhauster pEC331 -l 6
# found chain 8, fact 27 [[5,5,0,-3],[3,0,-5,5],[0,3,5,-5],[5,5,-3,0]] [3,4,5,6] => [17,14,7,20] => [95,116,-23,134] => [653,1070,-437,1124] => [5243,9764,-4595,9926] => [45257,88334,-43313,88820] => [401495,796436,-395663,797894] => [3595973,7172270,-3578477,7176644] => [32311283,64563524,-32258795,64576646]
#    3*a^3   + 3*b^3    + 3*c^3    - 3*d^3
# + 10*a^2*c + 10*a*c^2 + 10*b*c^2 - 10*a^2*d 
# + 40*a*d^2 + 40*b^2*c - 40*b^2*d + 40*b*d^2
# + 50*a*b*c - 50*a*c*d - 50*b*c*d - 50*a*b*d
 
TEST MX15            pEC322 
CALL MatrixExhauster pEC322 -l 6 -v [16,2,15,9]
# loops

TEST MX16            pEC322 
CALL MatrixExhauster pEC322 -l 6 -v [15,9,16,2]
# loops   

TEST MX17            pEC331 
CALL MatrixExhauster pEC331 -l 6 -v [18,21,19,28]
# chain 8, fact 27 [[0,-5,3,5],[3,5,0,-5],[5,0,5,-3],[5,-3,5,0]] [18,21,19,28] => [92,19,101,122] => [818,-239,599,908] => [7532,-3281,4361,7802]

TEST MX18            pEC331 
CALL MatrixExhauster pEC331 -l 6 -v [11,27,15,29]

TEST MX19            pEC322 
CALL MatrixExhauster pEC322 -l 6 -v [34,2,33,15]
                
TEST MX21
CALL MatrixExhauster pEC331 -l 3 -v [1,0,0,1]
TEST MX22
CALL MatrixExhauster pEC340 -l 3 -v [1,0,0,-1]
TEST MX23
CALL MatrixExhauster pEC322 -l 3 -v [1,0,0,1]
TEST MX24
CALL MatrixExhauster pEC322 -l 3 -v [1,1,1,1]

TEST MX25            pEC331 
CALL MatrixExhauster pEC331 -l 10 -v [18,21,19,28]
# chain 8, fact 27 [[0,-5,3,5],[3,5,0,-5],[5,0,5,-3],[5,-3,5,0]] [18,21,19,28] => [92,19,101,122] => [818,-239,599,908] => [7532,-3281,4361,7802]

#--------
# initial 10 Vectors from data/prewrob3.dat
# 6,-3,-5,-4
# 9,-1,-8,-6
# 12,1,-10,-9
# 16,2,-15,-9
# 19,-3,-18,-10
# 20,-7,-17,-14
# 25,-4,-22,-17
# 27,10,-24,-19
# 28,-18,-21,-19
# 29,-11,-27,-15

LIMIT=5
TEST MX30            pEC340
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [6,-3,-5,-4]
# chain 8, fact 1 [[0,-2,-2,1],[-2,0,1,-2],[1,2,2,0],[2,1,0,2]] [6,-3,-5,-4] => [12,-9,-10,1] => [39,-36,-26,17] => [141,-138,-85,76] => [522,-519,-305,296] => [1944,-1941,-1126,1117] => [7251,-7248,-4190,4181] => [27057,-27054,-15625,15616] => [100974,-100971,-58301,58292]
# chain 8, fact 1 [[0,-2,1,-2],[-2,0,-2,1],[2,1,2,0],[1,2,0,2]] [6,-3,-5,-4] => [9,-6,-1,-8] => [27,-24,10,-19] => [96,-93,50,-59] => [354,-351,199,-208] => [1317,-1314,755,-764] => [4911,-4908,2830,-2839] => [18324,-18321,10574,-10583] => [68382,-68379,39475,-39484]

TEST MX31            pEC340 
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [9,-1,-8,-6]
TEST MX32            pEC340
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [12,1,-10,-9]
TEST MX33            pEC340
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [16,2,-15,-9]
TEST MX34            pEC340 
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [19,-3,-18,-10]
TEST MX35            pEC340
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [20,-7,-17,-14]
TEST MX36            pEC340
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [25,-4,-22,-17]
TEST MX37            pEC340 
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [27,10,-24,-19]
TEST MX38            pEC340
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [28,-18,-21,-19]
TEST MX39            pEC340
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [29,-11,-27,-15]

# C:\Users\gfis\work\gits\ramath>grep "chain 8" test/MX3*.this.tst | cut -b 20-150 | sort
# chain 8, fact 1 [[-2,0,-2,1],[0,-2,1,-2],[1,2,0,2],[2,1,2,0]] [6,-3,-5,-4] => [-6,9,-8,-1] => [27,-24,10,-19] => [-93,96,-59,50] => [354,-351,199,-208] => [-1314,1317,-764,755] => [4911,-4908,2830,-2839] => [-18321,18324,-10583,10574] => [68382,-68379,39475,-39484]
# chain 8, fact 1 [[-2,0,1,-2],[0,-2,-2,1],[2,1,0,2],[1,2,2,0]] [6,-3,-5,-4] => [-9,12,1,-10] => [39,-36,-26,17] => [-138,141,76,-85] => [522,-519,-305,296] => [-1941,1944,1117,-1126] => [7251,-7248,-4190,4181] => [-27054,27057,15616,-15625] => [100974,-100971,-58301,58292]
# chain 8, fact 1 [[0,-2,-2,1],[-2,0,1,-2],[1,2,2,0],[2,1,0,2]] [6,-3,-5,-4] => [12,-9,-10,1] => [39,-36,-26,17] => [141,-138,-85,76] => [522,-519,-305,296] => [1944,-1941,-1126,1117] => [7251,-7248,-4190,4181] => [27057,-27054,-15625,15616] => [100974,-100971,-58301,58292]
# chain 8, fact 1 [[0,-2,1,-2],[-2,0,-2,1],[2,1,2,0],[1,2,0,2]] [6,-3,-5,-4] => [9,-6,-1,-8] => [27,-24,10,-19] => [96,-93,50,-59] => [354,-351,199,-208] => [1317,-1314,755,-764] => [4911,-4908,2830,-2839] => [18324,-18321,10574,-10583] => [68382,-68379,39475,-39484]
# chain 8, fact 1 [[-2,-2,1,0],[1,0,2,2],[2,2,0,1],[0,1,-2,-2]] [9,-1,-8,-6] => [-24,-19,10,27] => [96,50,-59,-93] => [-351,-208,199,354] => [1317,755,-764,-1314] => [-4908,-2839,2830,4911] => [18324,10574,-10583,-18321] => [-68379,-39484,39475,68382] => [255201,147335,-147344,-255198]
# chain 8, fact 1 [[-2,1,-2,0],[2,0,2,1],[1,2,0,2],[0,-2,1,-2]] [9,-1,-8,-6] => [-3,-4,-5,6] => [12,-10,1,-9] => [-36,17,-26,39] => [141,-85,76,-138] => [-519,296,-305,522] => [1944,-1126,1117,-1941] => [-7248,4181,-4190,7251] => [27057,-15625,15616,-27054]
# chain 8, fact 1 [[0,-2,1,-2],[1,2,0,2],[2,0,2,1],[-2,1,-2,0]] [9,-1,-8,-6] => [6,-5,-4,-3] => [12,-10,1,-9] => [39,-26,17,-36] => [141,-85,76,-138] => [522,-305,296,-519] => [1944,-1126,1117,-1941] => [7251,-4190,4181,-7248] => [27057,-15625,15616,-27054]
# chain 8, fact 1 [[0,1,-2,-2],[2,2,0,1],[1,0,2,2],[-2,-2,1,0]] [9,-1,-8,-6] => [27,10,-19,-24] => [96,50,-59,-93] => [354,199,-208,-351] => [1317,755,-764,-1314] => [4911,2830,-2839,-4908] => [18324,10574,-10583,-18321] => [68382,39475,-39484,-68379] => [255201,147335,-147344,-255198]
# chain 8, fact 1 [[-2,1,-2,0],[2,0,2,1],[1,2,0,2],[0,-2,1,-2]] [12,1,-10,-9] => [-3,-5,-4,6] => [9,-8,-1,-6] => [-24,10,-19,27] => [96,-59,50,-93] => [-351,199,-208,354] => [1317,-764,755,-1314] => [-4908,2830,-2839,4911] => [18324,-10583,10574,-18321]
# chain 8, fact 1 [[0,1,-2,-2],[2,2,0,1],[1,0,2,2],[-2,-2,1,0]] [12,1,-10,-9] => [39,17,-26,-36] => [141,76,-85,-138] => [522,296,-305,-519] => [1944,1117,-1126,-1941] => [7251,4181,-4190,-7248] => [27057,15616,-15625,-27054] => [100974,58292,-58301,-100971] => [376836,217561,-217570,-376833]
# chain 8, fact 1 [[0,-2,-2,1],[1,2,2,0],[-2,1,0,-2],[2,0,1,2]] [27,10,-24,-19] => [9,-1,-6,-8] => [6,-5,-3,-4] => [12,-10,-9,1] => [39,-26,-36,17] => [141,-85,-138,76] => [522,-305,-519,296] => [1944,-1126,-1941,1117] => [7251,-4190,-7248,4181]
# chain 8, fact 1 [[0,1,-2,-2],[2,2,1,0],[-2,-2,0,1],[1,0,2,2]] [27,10,-24,-19] => [96,50,-93,-59] => [354,199,-351,-208] => [1317,755,-1314,-764] => [4911,2830,-4908,-2839] => [18324,10574,-18321,-10583] => [68382,39475,-68379,-39484] => [255201,147335,-255198,-147344] => [952419,549874,-952416,-549883]

TEST MX3A            pEC340
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [34,2,-33,-15]
TEST MX3B            pEC340
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [34,9,-33,-16]
TEST MX3C            pEC340
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [39,17,-36,-26]
TEST MX3D            pEC340
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [40,12,-33,-31]
TEST MX3E            pEC340
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [41,-2,-40,-17]
TEST MX3F            pEC340
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [41,-6,-33,-32]
TEST MX3G            pEC340
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [44,-16,-41,-23]
TEST MX3H            pEC340
CALL MatrixExhauster pEC340 -l $(LIMIT) -v [46,-27,-37,-30]
#--------------------------
TEST MX40            pEC340
CALL MatrixExhauster pEC340 -l 3 -v [3,4,5,-6]
# found chain 6, fact 1 [[-2,-2,1,0],[1,0,2,2],[2,2,0,1],[0,1,-2,-2]] [3,4,5,-6] => [-9,1,8,6] => [24,19,-10,-27] => [-96,-50,59,93]

TEST MX41            pEC340 
CALL MatrixExhauster pEC340 -l 3 -v [9,10,-1,-12]
# found chain 2, fact 1 [[-2,-2,1,0],[1,0,2,2],[2,2,0,1],[0,1,-2,-2]] [9,10,-1,-12] => [-39,-17,26,36] => [138,85,-76,-141] ?? [-522,-296,305,519]

TEST MX42            pEC340
CALL MatrixExhauster pEC340 -l 3 -v [1,6,8,-9]
# found chain 8, fact 1 [[0,2,2,1],[1,-2,-2,0],[2,1,0,2],[-2,0,1,-2]] [1,6,8,-9] => [19,-27,-10,24] => [-50,93,59,-96] => [208,-354,-199,351]

TEST MX43            pEC340
CALL MatrixExhauster pEC340 -l 5 -v [1,6,8,-9]

TEST MX44            pEC340
CALL MatrixExhauster pEC340 -l 7 -v [3,4,5,-6]
#----------
PACKAGE=org.teherba.ramath.linear

TEST MA12            chain 
CALL Matrix -chain [[5,5,0,-3],[3,0,5,5],[0,-3,5,5],[5,5,3,0]] [1,12,9,10] 2 2
#    [9,10,1,12] passed
#    [1,12,9,10] passed
#    16      2     15     9  failed
#    27     10     24    19  failed

TEST MA13            chain 
CALL Matrix -chain [[5,5,0,-3],[3,0,-5,5],[0,3,5,-5],[5,5,-3,0]] 		[3,4,5,6] 3 1
# chain 8, fact 0  [[5,5,0,-3],[3,0,-5,5],[0,3,5,-5],[5,5,-3,0]] 		[3,4,5,6] => [17,14,7,20] => [95,116,-23,134] => [653,1070,-437,1124] => [5243,9764,-4595,9926] => [45257,88334,-43313,88820] => [401495,796436,-395663,797894] => [3595973,7172270,-3578477,7176644] => [32311283,64563524,-32258795,64576646]


TEST MA14            chain 
CALL Matrix -chain [[0,1,3,-3],[2,2,0,-1],[1,0,-3,3],[2,2,-1,0]] 		[3,4,5,6]	3 1
# none

TEST MA15            chain 
CALL Matrix -chain [[-2,-1,3,1],[-3,0,6,1],[-3,-2,4,2],[-3,-1,6,2]] 	[3,4,5,6] 3 1
# chain 8, fact 0  [[-2,-1,3,1],[-3,0,6,1],[-3,-2,4,2],[-3,-1,6,2]] 	[3,4,5,6] => [11,27,15,29] => [25,86,31,88] => [45,199,53,201] => [71,384,81,386] => [103,659,115,661] => [141,1042,155,1044] => [185,1551,201,1553] => [235,2204,253,2206]

TEST MA16            chain 
CALL Matrix -chain [[0,-2,1,4],[1,1,1,1],[1,-2,0,4],[1,-1,1,4]] 		[3,4,5,6] 3 1
# chain 8, fact 0  [[0,-2,1,4],[1,1,1,1],[1,-2,0,4],[1,-1,1,4]] 		[3,4,5,6] => [21,18,19,28] => [95,86,97,134] => [461,412,459,642] => [2203,1974,2205,3076] => [10561,9458,10559,14738] => [50595,45316,50597,70614] => [242421,217122,242419,338332] => [1161503,1040294,1161505,1621046]

TEST MA17            chain 
CALL Matrix -chain [[1,2,2,0],[1,1,1,1],[2,2,1,0],[2,3,2,0]] 			[3,4,5,6] 3 1
# chain 8, fact 0  [[1,2,2,0],[1,1,1,1],[2,2,1,0],[2,3,2,0]] 			[3,4,5,6] => [21,18,19,28] => [95,86,97,134] => [461,412,459,642] => [2203,1974,2205,3076] => [10561,9458,10559,14738] => [50595,45316,50597,70614] => [242421,217122,242419,338332] => [1161503,1040294,1161505,1621046]

TEST MA18            chain 
CALL Matrix -chain [[1,-2,0,4],[1,1,1,1],[0,-2,1,4],[1,-1,1,4]] 		[3,4,5,6] 3 1
# chain 8, fact 0  [[1,-2,0,4],[1,1,1,1],[0,-2,1,4],[1,-1,1,4]] 		[3,4,5,6] => [19,18,21,28] => [95,86,97,134] => [459,412,461,642] => [2203,1974,2205,3076] => [10559,9458,10561,14738] => [50595,45316,50597,70614] => [242419,217122,242421,338332] => [1161503,1040294,1161505,1621046]

TEST MA19            chain 
CALL Matrix -chain [[2,2,1,0],[1,1,1,1],[1,2,2,0],[2,3,2,0]] 			[3,4,5,6] 3 1
# chain 8, fact 0  [[2,2,1,0],[1,1,1,1],[1,2,2,0],[2,3,2,0]] 			[3,4,5,6] => [19,18,21,28] => [95,86,97,134] => [459,412,461,642] => [2203,1974,2205,3076] => [10559,9458,10561,14738] => [50595,45316,50597,70614] => [242419,217122,242421,338332] => [1161503,1040294,1161505,1621046]
