# Collection of Testcases for Ramath
# @(#) $Id: sequence.tests $
# 2019-10-12: TriangleRecurrence
# 2019-08-29: LinearRecurrence with Berlekamp-Massey
# 2015-03-23, Dr. Georg Fischer: extracted from linear.tests
#-----------------------------------
# Caution:
# (1) Adjust the following line: URL where Ramath was deployed
URL=http://localhost:8080/ramath/servlet
# (2) Adjust the following line: default commandline arguments
ARGS=
#======================================================================

PACKAGE=org.teherba.ramath.sequence
# SequenceReader

TEST SER0
CALL SequenceReader

TEST SER1 -a -d
CALL SequenceReader -a A131313 -d 1,2,3,4,5,6,7,8,9,0,1

TEST SER2 -f
DATA 
 A111111 1,2,3,4,5,6,7,8,9,0,1
 A222222 2,2,3,4,5,6,7,8,9,0,1
 A333333 3,2,3,4,5,6,7,8,9,0,1
CALL SequenceReader -f $(DATA)

TEST SER3 -b -f -m 
DATA 
 A322469 1
 A307048 2
 A160016 3
 A000027 4
CALL SequenceReader -b ../OEIS-mat/common/bfile -m 8 -f $(DATA)

TEST SER4 -b -f -m
DATA 
 A322469 1
 A307048 2
 A160016 3
 A000027 4
CALL SequenceReader -b ../OEIS-mat/common/bfile -m 16 -f $(DATA)

TEST SER5 -f
DATA 
 A111111 1,2,3,4,5,6,7,8,9,0,1
 A222222 2,2,3,4,5,6,7,8,9,0,1
 A333333 3,2,3,4,5,6,7,8,9,0,1
CALL SequenceReader -m 4 -f $(DATA)
#-------------------------------
# JoeisPreparer

TEST JP1 JoeisPreparer joeis
DATA
 A000000	dex	1	postfix	true	10	mod(17,3) + 2 mod(18,10)	A	B
 A074785	dex	0	postfix	true	10	-log(log(2))	A	B
 A074916	dex	1	postfix	true	10	(pi+e)/2	A	B
 A074921	dex	0	postfix	true	10	(pi+e)/2-sqrt(pi*e)	A	B
 A074948	dex	1	postfix	true	10	sqrt((pi^2+e^2)/2)	A	B
 A075549	dex	0	postfix	true	10	9-12*log(2)	A	B
 A076668	dex	0	postfix	true	10	sqrt(2/pi)	A	B
 A077453	dex	1	postfix	true	10	1+sqrt(11)*(sqrt(29)+sqrt(5))/24	A	B
CALL JoeisPreparer -d 0 -f $(DATA)
#-------------------------------
# Triangle
TEST TRA1 Triangle toTriangle
DATA
 A007318
 A029653
 A130595
 A135278
 A271703
CALL Triangle -d 0 -eval  -b ../OEIS-mat/common/bfile -f $(DATA) -m 37

TEST TRA2 Triangle TraitCards
CALL Triangle -d 0 -trait -b ../OEIS-mat/common/bfile -f test/TRA1.data.tmp -m 37

#-------------------------------
# LinearRecurrence

TEST LIR1 LinearRecurrence -comp
CALL LinearRecurrence      -comp 1,2,3 5,6,7 6

TEST LIR2 LinearRecurrence -find
CALL LinearRecurrence -d 1 -find test/LIR1.this.tst

TEST LIR3 LinearRecurrence -find
CALL LinearRecurrence      -find test/LIR1.this.tst

TEST LIR4 LinearRecurrence -comp A041142
CALL LinearRecurrence      -comp 0,18,0,-1 8,9,152,161 10

TEST LIR5 LinearRecurrence -find
CALL LinearRecurrence -d 1 -find test/LIR4.this.tst

TEST LIR6 LinearRecurrence -comp Fibonacci A000045
CALL LinearRecurrence      -comp 1,1 0,1 10

TEST LIR7 LinearRecurrence -find Fibonacci A000045
CALL LinearRecurrence -d 1 -find test/LIR6.this.tst

TEST LIR8 LinearRecurrence some lin.rec.s
DATA
 A041142
 A000045
 A322469
 A307048
CALL LinearRecurrence -d 0 -eval -b ../OEIS-mat/common/bfile -f $(DATA) -m 16

TEST LIR9 LinearRecurrence loop?
DATA
 A000058
CALL LinearRecurrence -d 1 -eval -d 1 -b ../OEIS-mat/common/bfile -f $(DATA) -m 13

#--------
# TriangleRecurrence

TEST TRI1 TriangleRecurrence -find Pascal's triangle A007318
DATA
 0 1
 1 1
 2 1
 3 1
 4 2
 5 1
 6 1
 7 3
 8 3
 9 1
 10 1
 11 4
 12 6
 13 4
 14 1
 15 1
 16 5
 17 10
 18 10
 19 5
 20 1
CALL TriangleRecurrence -d 1 -find $(DATA)

TEST TRI2 TriangleRecurrence -find
# A056242
# T(n,k) = 2*T(n-1,k) + 2*T(n-1,k-1) - T(n-2,k) - T(n-2,k-1), T(1,1) = 1, T(2,1) = 1, T(2,2) = 2. - Philippe Del√©ham, Feb 11 2012
# G.f.: -(-1+x)*x*y/(1-2*x-2*x*y+x^2*y+x^2). - R. J. Mathar, Aug 11 2015
DATA
 1 1
 2 1
 3 2
 4 1
 5 5
 6 4
 7 1
 8 9
 9 16
 10 8
 11 1
 12 14
 13 41
 14 44
 15 16
 16 1
 17 20
 18 85
 19 146
 20 112
 21 32
CALL TriangleRecurrence -d 1 -find  $(DATA)

TEST TRI3 TriangleRecurrence -find
# A046741
# G.f.: (1-t*z)/(1 - z - 2*t*z - t*z^2 + t^3*z^3)
# T(n,k) = T(n-1,k) + 2*T(n-1,k-1) + T(n-2,k-1) - T(n-3,k-3).
DATA
 0 1
 1 1
 2 1
 3 1
 4 4
 5 2
 6 1
 7 7
 8 11
 9 3
 10 1
 11 10
 12 29
 13 26
 14 5
CALL TriangleRecurrence -d 1 -find  $(DATA)

TEST TRI6 TriangleRecurrence eval 4
DATA
 A007318
 A029653
 A130595
 A135278
CALL TriangleRecurrence -d 0 -eval -b ../OEIS-mat/common/bfile -f $(DATA) -m 21

# TEST TRI7 all keyword:tabl
# CALL TriangleRecurrence -d 0 -eval -b ../OEIS-mat/common/bfile -f tabl.lst.tmp -m 15
